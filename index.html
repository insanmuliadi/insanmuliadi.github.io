<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Generate URL Blogger dengan JSONP</title>
	<!--<link rel="stylesheet" href="css/main.css">-->
  <style>
*,*::before,*::after{box-sizing:border-box}*:not(dialog){margin:0}@media (prefers-reduced-motion:no-preference){html{interpolate-size:allow-keywords}}body{line-height:1.5;-webkit-font-smoothing:antialiased}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{overflow-wrap:break-word}p{text-wrap:pretty}h1,h2,h3,h4,h5,h6{text-wrap:balance}#root,#__next{isolation:isolate}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;font-size:16px}
    a{text-decoration:none}
.main-raw{max-width:860px;margin:0 auto}
.page-header{background:#fffaf4;margin-bottom:20px;padding:10px 0}.page-header h1{font-size:20px}.page-description{font-size:.8em}.tabs{margin-bottom:10px}.tab-btn{padding:2px 8px;font-size:.8em;border-radius:2px;border:1px solid #ddd;background:#fffaf4}ol,ul{margin-left:40px}p{margin-bottom:15px}
    section{margin-bottom:30px}
    .sectionh2{margin-bottom:15px}
    
  input{padding:5px;width:28%;margin-right:10px}
  textarea{width:100%;padding:5px}
  .option{display:flex;width:100%;margin:10px 0}
  .option button{width:80px;margin-left:auto}
  #copy {width: 60px;padding: 5px 10px;}
  .copyNotification{display:none;position:absolute;background:#c72c2c;padding:7px 20px;border-radius:2px;color:#fff;transform:translate3d(-50%,-50%,0);left:50%;top:50%}
  .copyNotification.show{display:block}
    *{margin:0;padding:0;box-sizing:border-box}
  .main{max-width:680px;margin:10px auto;position:relative}
	  .tab-panel {
  display: none;
}

.tab-panel.active {
  display: block;
}

.tab-btn.active {
  color: red;
}
  input{padding:5px;width:28%;margin-right:10px}
  textarea{width:100%;padding:5px}
  .option{display:flex;width:100%;margin:10px 0}
  .option button{width:80px;margin-left:auto}
  #copy {width: 60px;padding: 5px 10px;}
  .copyNotification{display:none;position:absolute;background:#c72c2c;padding:7px 20px;border-radius:2px;color:#fff;transform:translate3d(-50%,-50%,0);left:50%;top:50%}
  .copyNotification.show{display:block}
  
  </style>
</head>
<body>
<header class="page-header">
	<div class="main-raw">
		<h1>Fun JS for Blogger</h1>
		<div class="page-description">Useful JS codes for Blogger Template</div>
	</div>
</header>
<main class="main">
	<div class="tabs">
  <button class="tab-btn active" data-tab="home">üè† Home</button>
  <button class="tab-btn" data-tab="ai">ü§ñ AI</button>
  <button class="tab-btn" data-tab="url">üîó URL Generator</button>
  <button class="tab-btn" data-tab="snippets">üìÑ JS Snippets</button>
  <button class="tab-btn" data-tab="request">üöÄ Request</button>
</div>

<div class="tab-content">
	<div id="home" class="tab-panel active">
		<section>
                <h2 class="sectionh2 tab-title">üñêüèª Selamat Datang di Aplikasi</h2>
                <p class="tab-description">Ini adalah halaman utama aplikasi. Gunakan tab di atas untuk mengakses berbagai fitur yang tersedia.</p>
                
                <p>Aplikasi ini menyediakan beberapa fitur utama:</p>
                <ul class="feature-list">
                    <li><strong>Home</strong> - Halaman utama dengan informasi umum</li>
                    <li><strong>AI</strong> - Fitur kecerdasan buatan untuk analisis data</li>
                    <li><strong>URL Generator</strong> - Alat untuk membuat URL dengan parameter khusus</li>
                    <li><strong>Snippets</strong> - Kumpulan potongan kode yang dapat digunakan kembali</li>
                    <li><strong>Request</strong> - Kirim permintaan ke server untuk pengolahan data</li>
                </ul>
                
                <div class="ai-response" style="margin-top: 30px;">
                    <h3><i class="fas fa-info-circle"></i> Petunjuk Penggunaan</h3>
                    <p>Klik pada tab yang ingin Anda buka. Tab yang aktif akan ditandai dengan warna biru. Setiap tab memiliki fungsionalitas yang berbeda sesuai dengan namanya.</p>
                </div>
    </section>
    <section>
      <h2 class="sectionh2">üìÉ Tutorial</h2>
      <article class="entry">
      	<a class="entrylink" href="#">
          <img alt="gambar ilustrasi" src="https://read.learnyard.com/content/images/2024/07/logo.png"/>
          <div class="entrysnippet">
          <h3>Kode JS untuk Menu dengan Dropdown</h3>
          <div class="entrysnippet">Berikut ini contoh kode Javascript untuk membuat menu yang memiliki dropdown yang bisa dikontrol di tata letak.</div>
          </div>
        </a>
      </article>
    </section>
    <button>Lihat Postingan Lainnya...</button>
	</div>
	<div id="ai" class="tab-panel">Konten AI</div>
  <div id="url" class="tab-panel">
		<div class="h2-label"> Blogger URL Generator</div>
		<h2>Generate URL Postingan Blogger (via JSONP)</h2>
		<div class="option">
			<input id="domain-name" type="text" placeholder="Url blog" value="www.goinsan.com">
			<input id="max-res" type="number" value="50">
			<input id="urltag" type="text" placeholder="label">
			<button onclick="generate()">Generate</button>
		</div>
		<textarea id="results" rows="20" cols="80" placeholder="Hasil URL akan muncul di sini..."></textarea>
		<button id="copy" onclick="copyText('results')">Salin</button>
		<div class="copyNotification">Disalin</div>
	</div>
  </div>
  <div id="snippets" class="tab-panel">Konten Snippets</div>
  <div id="request" class="tab-panel">Konten Request</div>
</div>
</main>
  <script>
	  function selectTab(){
		  document.addEventListener("DOMContentLoaded", () => {
  const tabs = document.querySelectorAll(".tab-btn");
  const panels = document.querySelectorAll(".tab-panel");

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const target = tab.dataset.tab;

      // reset active
      tabs.forEach(t => t.classList.remove("active"));
      panels.forEach(p => p.classList.remove("active"));

      // set active
      tab.classList.add("active");
      document.getElementById(target).classList.add("active");
    });
  });
});		  
	  }
	  selectTab();
    function generate() {
      const domName = document.getElementById("domain-name").value;
	  const maxres = document.getElementById("max-res").value;
      const urlRes = document.getElementById("results");
      const urlLabel = document.getElementById("urltag").value.trim();
      const callbackName = 'jsonpCallback_' + Date.now();
      const script = document.createElement('script');

      // Tentukan URL berdasarkan label
      let url = '';
      if (urlLabel === "") {
        url = `https://${domName}/feeds/posts/summary?alt=json-in-script&max-results=${maxres}&callback=${callbackName}`;
      } else {
        url = `https://${domName}/feeds/posts/summary/-/${encodeURIComponent(urlLabel)}?alt=json-in-script&max-results=${maxres}&callback=${callbackName}`;
      }

      // Definisikan callback global
      window[callbackName] = function(data) {
        const entries = data.feed.entry || [];
        const urls = entries.map(entry => {
          const altLink = entry.link.find(link => link.rel === 'alternate');
          return altLink ? altLink.href : null;
        }).filter(Boolean);

        urlRes.value = urls.join('\n');
        //console.log("Data berhasil diambil:", urls);

        // Bersihkan setelah selesai
        delete window[callbackName];
        document.body.removeChild(script);
      };

      // Inject script JSONP
      script.src = url;
      script.onerror = () => {
        urlRes.value = 'Gagal mengambil data JSONP.';
        delete window[callbackName];
        document.body.removeChild(script);
      };
      document.body.appendChild(script);
    };;
	
	
	function copyText(elementId) {
	var copyText = document.getElementById(elementId);
	var copyNotif = document.querySelector('.copyNotification');
	if (copyText.value == "") {alert("Konten kosong!");} else {
		copyText.select();
		copyText.setSelectionRange(0, 99999);
		navigator.clipboard.writeText(copyText.value).then(function() {
        setTimeout(function() {
          copyNotif.classList.add('show');
          setTimeout(function() {
            copyNotif.classList.remove('show');
          }, 1000);
        }, 100);
      });
	  //alert("Konten dengan format HTML berhasil disalin!");
	}
}
  </script>
</body>
</html>
